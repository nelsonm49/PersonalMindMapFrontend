# PersonalMindMap Frontend

This is the **frontend** for the PersonalMindMap project, built with [Next.js](https://nextjs.org) and React.

## Getting Started

1. **Install dependencies:**

    ```bash
    npm install
    ```

2. **Configure environment variables:**

    Create a `.env` file in the `frontend` directory. Example:

    ```
    NEXT_PUBLIC_API_URL_LOCAL=http://localhost:3001/api
    NEXT_PUBLIC_API_URL_DEV=http://3.19.66.169:3001/api
    NEXT_PUBLIC_API_URL_PROD=http://3.138.85.53:3001/api
    ```

    The app will automatically select the correct backend API URL based on where it is running:
    - **Local:** If running at `localhost:3000`, it uses `NEXT_PUBLIC_API_URL_LOCAL`
    - **Dev Website:** If running at `www.dev.personalmindmap.com`, it uses `NEXT_PUBLIC_API_URL_DEV`
    - **Production Website:** If running at `www.personalmindmap.com`, it uses `NEXT_PUBLIC_API_URL_PROD`

3. **Run the development server locally:**

    ```bash
    npm run dev
    ```

    Open [http://localhost:3000](http://localhost:3000) in your browser to use the app locally.

4. **Build for static export (for S3/CloudFront):**

    Before deploying to production or a remote server, build the optimized static version:

    ```bash
    npm run build
    ```

    This will generate an `out` directory containing your static site.  
    **Note:** After building, route files (like `login.html`) will automatically have their `.html` extensions removed by a post-build script `remove-html-extension.js`. CloudFront searches for objects/files by exact names. This ensures CloudFront/S3 can serve pretty URLs (e.g., `/login` instead of `/login.html`) without manual removing extensions.

5. **Deploying to Dev or Production:**

    - For S3/CloudFront deployment, upload the contents of the `out` directory to your S3 bucket.
    - For the dev website, deploy to `dev.personalmindmap.com` and ensure your `.env` contains the correct `NEXT_PUBLIC_API_URL_DEV`.
    - For production, deploy to `www.personalmindmap.com` and ensure your `.env` contains the correct `NEXT_PUBLIC_API_URL_PROD`.

## Project Structure

- Main app code: `src/app/`
- Mind map page: `src/app/mindmap/page.js`
- Login page: `src/app/login/page.js`
- Signup page: `src/app/signup/page.js`
- Environment variables: `.env`

## Notes

- The frontend automatically chooses the backend API URL based on the current hostname.
- The app uses [Next.js App Router](https://nextjs.org/docs/app) and React 19.
- For S3/CloudFront, use the static files in the `out` directory generated by `npm run build
